{% extends "base.html" %}
{% block content %}
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f0f2f5;
      margin: 0;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: auto;
      background: #fff;
      padding: 25px 30px;
      border-radius: 12px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    }

    h2 {
      text-align: center;
      color: #007bff;
      margin-bottom: 25px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 15px;
    }

    th, td {
      border-bottom: 1px solid #e0e0e0;
      padding: 12px;
      text-align: center;
      font-size: 14px;
      color: #333;
    }

    th {
      background-color: #007bff;
      color: white;
      font-weight: 500;
    }

    tr:hover {
      background-color: #f1f7ff;
    }

    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      text-decoration: none;
      font-weight: 500;
    }

    .btn-edit {
      background-color: #28a745;
      color: #fff;
    }

    .btn-edit:hover {
      background-color: #218838;
    }

    .btn-delete {
      background-color: #dc3545;
      color: #fff;
    }

    .btn-delete:hover {
      background-color: #c82333;
    }

    .btn-dashboard {
      background-color: #007bff;
      color: #fff;
      text-decoration: none;
      display: inline-block;
      text-align: center;
      margin-top: 20px;
      padding: 12px 25px;
      border-radius: 8px;
      font-weight: 500;
      transition: 0.3s;
    }

    .btn-dashboard:hover {
      background-color: #0056b3;
    }

    @media (max-width: 768px) {
      table, th, td {
        font-size: 12px;
      }
      .btn {
        padding: 6px 12px;
      }
    }
  </style>
  <div class="container">
    <h2>My Custom Trips</h2>

    {% if trips %}
      <table>
<thead>
  <tr>
    <th>ID</th>
    <th>Destination</th>
    <th>Transport</th>
    <th>Hotel</th>
    <th>Rooms</th>
    <th>Room Type</th>
    <th>People</th>
    <th>Start</th>
    <th>End</th>
    <th>Preferences</th>
    <th>Notes</th>
    <th>Status</th>
    <th>Price</th>
    <th>Admin Notes</th>
    <th>Actions</th>
  </tr>
</thead>
<tbody>
  {% for trip in trips %}
  <tr>
    <td>{{ trip.id }}</td>
    <td>{{ trip.destination }}</td>
    <td>{{ trip.transport }}</td>
    <td>{{ trip.hotel }}</td>
    <td>{{ trip.number_of_rooms or 'N/A' }}</td>
    <td>{{ trip.room_type or 'N/A' }}</td>
    <td>{{ trip.people }}</td>
    <td>{{ trip.start_date }}</td>
    <td>{{ trip.end_date }}</td>
    <td>{{ trip.other_preferences or 'N/A' }}</td>
    <td>{{ trip.notes or 'N/A' }}</td>
    <td>
      {% if trip.status == "Pending" %}
        <span style="color: orange; font-weight: bold;">Pending</span>
      {% elif trip.status == "Approved" %}
        <span style="color: green; font-weight: bold;">Approved</span>
      {% elif trip.status == "Confirmed" %}
        <span style="color: blue; font-weight: bold;">Confirmed</span>
      {% else %}
        <span style="color: red; font-weight: bold;">Rejected</span>
      {% endif %}
    </td>
    <td>{{ trip.price if trip.price else 'N/A' }}</td>
    <td>{{ trip.admin_notes or 'N/A' }}</td>
    <td>
      {% if trip.status == "Pending" %}
        <a href="{{ url_for('edit_custom_trip', trip_id=trip.id) }}" class="btn btn-edit">Edit</a>
         <a href="{{ url_for('delete_custom_trip', trip_id=trip.id) }}" 
           class="btn btn-delete"
           onclick="return confirm('Are you sure you want to delete this trip?');">Delete</a>
      {% elif trip.status == "Approved" %}
        <form method="POST" action="{{ url_for('confirm_custom_trip', trip_id=trip.id) }}">
          <button type="submit" class="btn btn-edit">Confirm Booking</button>
           <a href="{{ url_for('delete_custom_trip', trip_id=trip.id) }}" 
           class="btn btn-delete"
           onclick="return confirm('Are you sure you want to delete this trip?');">Delete</a>
        </form>
        <a href="{{ url_for('edit_custom_trip', trip_id=trip.id) }}" class="btn btn-edit">Resubmit</a>
      {% elif trip.status == "Rejected" %}
        <a href="{{ url_for('edit_custom_trip', trip_id=trip.id) }}" class="btn btn-edit">Resubmit</a>
         <a href="{{ url_for('delete_custom_trip', trip_id=trip.id) }}" 
           class="btn btn-delete"
           onclick="return confirm('Are you sure you want to delete this trip?');">Delete</a>
      {% endif %}
    </td>
  </tr>
  {% endfor %}
</tbody>

      </table>
    {% else %}
      <p style="text-align:center; color: gray;">You donâ€™t have any custom trips yet.</p>
    {% endif %}

    <a href="{{ url_for('user_dashboard') }}" class="btn-dashboard">Dashboard</a>
  </div>
{% endblock %}
