{% extends "base.html" %}

{% block content %}
<style>
    body {
        background-color: #f8f9fc;
        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        padding: 30px;
    }

    h2 {
        color: #2c3e50;
        font-size: 28px;
        font-weight: 600;
        margin-bottom: 25px;
        text-align: center;
    }

    /* Dashboard grid */
    .dashboard-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        gap: 25px;
        margin-bottom: 40px;
    }

    /* Dashboard cards */
    .dashboard-card {
        background: white;
        border-radius: 15px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        padding: 25px;
        text-align: center;
        transition: transform 0.25s ease, box-shadow 0.25s ease;
    }

    .dashboard-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 8px 20px rgba(0,0,0,0.12);
    }

    .dashboard-card a {
        display: block;
        font-size: 17px;
        font-weight: 500;
        color: #007bff;
        text-decoration: none;
    }

    .dashboard-card a:hover {
        color: #0056b3;
    }

    .dashboard-card span {
        display: block;
        font-size: 35px;
        margin-bottom: 15px;
    }

    /* Logout special */
    .logout-card a {
        color: #dc3545 !important;
        font-weight: 600;
    }

    .logout-card a:hover {
        color: #a71d2a !important;
    }

    /* Profile section */
    .profile-card {
        max-width: 600px;
        margin: auto;
        background: white;
        padding: 30px;
        border-radius: 15px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.08);
        text-align: left;
    }

    .profile-card h3 {
        margin-bottom: 20px;
        font-size: 22px;
        color: #333;
        border-bottom: 2px solid #f1f1f1;
        padding-bottom: 10px;
    }

    .profile-card p {
        font-size: 16px;
        margin: 10px 0;
    }

    .btn-edit {
        display: inline-block;
        margin-top: 20px;
        padding: 12px 25px;
        background: #28a745;
        color: white;
        text-decoration: none;
        border-radius: 8px;
        transition: 0.3s;
    }

    .btn-edit:hover {
        background: #218838;
    }

    /* Feedback section card */
    .feedback-card {
        max-width: 600px;
        margin: 30px auto;
        background: #fff;
        padding: 20px;
        border-radius: 12px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    }
</style>

<h2>User Dashboard</h2>

<!-- Dashboard buttons as grid -->
<div class="dashboard-grid">
    <div class="dashboard-card"><span>üè†</span><a href="{{ url_for('home') }}">Home</a></div>
    <div class="dashboard-card"><span>üë§</span><a href="{{ url_for('profile') }}">Profile</a></div>
    <div class="dashboard-card"><span>üß≥</span><a href="{{ url_for('tour_packages') }}">Tour Packages</a></div>
    <div class="dashboard-card"><span>üìù</span><a href="{{ url_for('custom_trip') }}">Custom Own Trip</a></div>
    <div class="dashboard-card"><span>üìÇ</span><a href="{{ url_for('my_custom_trips') }}">My Custom Trips</a></div>
    <div class="dashboard-card"><span>üì¶</span><a href="{{ url_for('my_booked_packages') }}">My Booked Packages</a></div>
    <div class="dashboard-card"><span>üí¨</span><a href="{{ url_for('user_chat') }}">Chat with Admin</a></div>
    <div class="dashboard-card"><span>‚≠ê</span><a href="{{ url_for('agency_feedback') }}">Rate Our Agency</a></div>
    <div class="dashboard-card logout-card"><span>üö™</span><a href="{{ url_for('logout') }}">Logout</a></div>
</div>

<!-- Feedback Section -->
{% if user_feedback %}
<div class="feedback-card">
    <h5>Your Rating: {{ user_feedback.rating }}/5</h5>
    <p>{{ user_feedback.feedback }}</p>
    <small class="text-muted">Posted on {{ user_feedback.created_at.strftime('%Y-%m-%d %H:%M') }}</small>

    {% if user_feedback.replies %}
        <div class="mt-2">
            <span class="badge bg-info">
                {{ user_feedback.replies|length }} repl{{ 'y' if user_feedback.replies|length == 1 else 'ies' }}
            </span>
        </div>
    {% endif %}

    <div class="mt-2">
        <a href="{{ url_for('agency_feedback') }}" class="btn btn-outline-primary btn-sm">
            View/Edit Feedback
        </a>
    </div>
</div>
{% endif %}

<!-- Profile Section -->
<div id="profile" class="profile-card">
    <h3>Profile Details</h3>
    <p><strong>Name:</strong> {{ user.name }}</p>
    <p><strong>Email:</strong> {{ user.email }}</p>
    <a class="btn-edit" href="{{ url_for('edit_profile') }}">‚úèÔ∏è Edit Profile</a>
</div>

{% endblock %}
