{% extends 'base.html' %}

{% block content %}
<style>
    /* Fullscreen background */
    .hero {
        position: relative;
        width: 100%;
        height: 100vh;
        background-image: url({{ url_for('static', filename='uploads/' ~ home_image.filename) if home_image else url_for('static', filename='default_wallpaper.jpg') }});
        background-size: cover;
        background-position: center;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: flex-start;
        color: white;
        text-shadow: 2px 2px 6px rgba(0,0,0,0.7);
    }

    .hero h1 {
        margin-top: 50px;
        font-size: 4rem;
        font-weight: bold;
    }

    .hero .btn-group {
        margin-top: 30px;
    }

    .hero .btn {
        margin: 0 10px;
        background-color: #007bff;
        border: none;
        color: white;
        padding: 10px 20px;
        font-size: 1.2rem;
        border-radius: 5px;
    }

    .hero .btn:hover {
        background-color: #0056b3;
        color: white;
    }

    /* Admin upload form */
    .upload-wallpaper {
        position: absolute;
        top: 20px;
        right: 20px;
        background: rgba(255,255,255,0.85);
        padding: 15px;
        border-radius: 8px;
        color: black;
    }

    .upload-wallpaper input[type=file] {
        margin-bottom: 10px;
    }
</style>

<div class="hero">
    <h1>ASTHA TRAVEL AGENCY</h1>


        
    {% set stats = get_agency_stats() %}
    {% if stats.total_ratings > 0 %}
    <div class="agency-rating" style="position: absolute; top: 20px; left: 20px; background: rgba(255,255,255,0.9); padding: 10px 15px; border-radius: 10px; color: #333;">
        <div style="text-align: center;">
            <div style="font-size: 1.8rem; font-weight: bold; color: #ff9900;">
                {{ stats.average_rating }}/5
            </div>
            <div style="font-size: 1.2rem; margin-bottom: 5px;">
                {% for i in range(stats.average_rating|int) %}‚≠ê{% endfor %}
            </div>
            <div style="font-size: 0.9rem; color: #666;">
                {{ stats.total_ratings }} ratings
            </div>
        </div>
    </div>
    {% endif %}

    <div class="btn-group">
        <a href="{{ url_for('home') }}" class="btn">Home</a>
        <a href="{{ url_for('login') }}" class="btn">Login</a>
        <a href="{{ url_for('admin_login') }}" class="btn">Admin Login</a>
        <a href="{{ url_for('register') }}" class="btn">Register</a>
    </div>

    {% if current_user.is_authenticated and current_user.is_admin %}
    <div class="upload-wallpaper">
        <form method="POST" action="{{ url_for('admin_home_image') }}" enctype="multipart/form-data">
            <label for="image_file"><strong>Update Wallpaper:</strong></label>
            <input type="file" name="image_file" id="image_file" required>
            <button type="submit" class="btn btn-success btn-sm">Upload</button>
        </form>
    </div>
    {% endif %}
</div>
{% endblock %}
