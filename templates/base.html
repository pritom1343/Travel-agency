<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Travel Agency</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <!-- FontAwesome for eye icon -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>

<body>
    <!-- Navbar -->
    <nav class="navbar">
        <div class="nav-left">
            <a href="{{ url_for('home') }}" class="logo">Travel Agency</a>
        </div>
        <div class="nav-right">
            {% if current_user.is_authenticated %}
                {% if current_user.is_admin %}
                    <a href="{{ url_for('dashboard') }}">Admin Dashboard</a>
                {% else %}
                    <a href="{{ url_for('user_dashboard') }}">User Dashboard</a>
                {% endif %}
                <a href="{{ url_for('logout') }}">Logout</a>
            {% else %}
                <a href="{{ url_for('login') }}">User Login</a>
                <a href="{{ url_for('register') }}">Register</a>
                <a href="{{ url_for('admin_login') }}">Admin Login</a>
            {% endif %}
        </div>
    </nav>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div class="flash-container">
                {% for category, message in messages %}
                    <div class="flash {{ category }}">
                        {{ message }}
                        <button class="close-btn" onclick="this.parentElement.style.display='none';">&times;</button>
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}

    

    <div class="container {% if request.endpoint == 'home' %}no-container{% endif %}">
        {% block content %}{% endblock %}
    </div>
    
    <script src="{{ url_for('static', filename='js/scripts.js') }}" defer></script>

    <!-- Password Toggle Script -->
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        document.querySelectorAll('input[type="password"]').forEach(function(input) {
            // Skip if toggle already exists
            if (input.nextElementSibling && input.nextElementSibling.classList.contains('toggle-password')) return;

            const toggle = document.createElement('span');
            toggle.classList.add('fa', 'fa-eye', 'toggle-password');
            toggle.style.cssText = 'position: absolute; right: 10px; top: 50%; transform: translateY(-50%); cursor: pointer;';
            input.parentElement.style.position = 'relative';
            input.parentElement.appendChild(toggle);

            toggle.addEventListener('click', function() {
                if (input.type === 'password') {
                    input.type = 'text';
                    toggle.classList.remove('fa-eye');
                    toggle.classList.add('fa-eye-slash');
                } else {
                    input.type = 'password';
                    toggle.classList.remove('fa-eye-slash');
                    toggle.classList.add('fa-eye');
                }
            });
        });
    });
    </script>
    <!-- Bootstrap JS (with Popper) -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
